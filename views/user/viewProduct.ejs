<!DOCTYPE html>
<html>
  <%- include('../partials/head.ejs') %>
  <body>
    <!-- nav bar -->
    <%- include('../partials/userNavBar.ejs') %>


    <div id="all">
      <div id="content">
        <div class="container">
          <div class="row">

            <!-- sidebar -->
            <%- include('../partials/userFilterBar.ejs') %>
            
            <div class="col-lg-9 order-1 order-lg-2">
              <div id="productMain" class="row">
                <div class="col-md-6">
                  <!-- <div data-slider-id="1" class="owl-carousel shop-detail-carousel"> -->
                  <div>

                   <div class="item"id="img-container" style="max-height: 500px;">
                      <img class="img-fluid" src="/images/<%=product._id%>.jpg" />
                    </div> 
                    <!-- <div class="item"> <img src="/images/<%=product._id%>.jpg" alt="" class="img-fluid"></div> -->
                    <!-- <div class="item"> <img src="/images/<%=product._id%>_one.jpg" alt="" class="img-fluid"></div>
                    <div class="item"> <img src="/images/<%=product._id%>_two.jpg" alt="" class="img-fluid"></div> -->
                  </div>
                  <div class="ribbon sale">
                    <div class="theribbon">SALE</div>
                    <div class="ribbon-background"></div>
                  </div>
                  <!-- /.ribbon-->
                  <div class="ribbon new">
                    <div class="theribbon">NEW</div>
                    <div class="ribbon-background"></div>
                  </div>
                  <!-- /.ribbon-->
                </div>
                <div class="col-md-6" >
                  <div class="box">
                    <a onclick="addToWishlist('<%=product._id%>')" class="btn btn-outline-primary"><i id="heartIcon" class="fa fa-heart"></i></a>
                    <h1 class="text-center"><%=product.name%></h1>
                    <h4 class="goToDescription"><a href="#details" class="scroll-to">Scroll to product details</a></h4>
                    <p class="price"><del class="text-danger">&#8377 <%=product.price%></del></p>
                    <p class="price mt-1">&#8377 <%=offerPrice %></p>
                    <p class="text-center buttons">
                      <a onclick="addToCart('<%=product._id%>','<%=offerPrice %>')" class="btn btn-primary"><i class="fa fa-shopping-cart"></i> Add to cart</a>
                      <!-- <a onclick="addToWishlist('<%=product._id%>')" class="btn btn-outline-primary"><i class="fa fa-heart"></i> Add to wishlist</a> -->
                    </p>
                  </div>
                  <!-- <div data-slider-id="1" class="owl-thumbs">
                    <button class="owl-thumb-item"><img src="/images/<%=product._id%>.jpg" alt="" class="img-fluid"></button>
                    <button class="owl-thumb-item"><img src="/images/<%=product._id%>_one.jpg" alt="" class="img-fluid"></button>
                    <button class="owl-thumb-item"><img src="/images/<%=product._id%>_two.jpg" alt="" class="img-fluid"></button>
                  </div> -->
                </div>
              </div>
              <div id="details" class="box">
                <p></p>
                <h3>Product details</h3>
                <h4>
                  <pre>
                    <b>
<%=product.spec%>
                    </b>
                  </pre>
                </h4>
                <!-- <h4>Material &amp; care</h4>
                <ul>
                  <li>Polyester</li>
                  <li>Machine wash</li>
                </ul>
                <h4>Size &amp; Fit</h4>
                <ul>
                  <li>Regular fit</li>
                  <li>The model (height 5'8" and chest 33") is wearing a size S</li>
                </ul>
                <blockquote>
                  <p><em>Define style this season with Armani's new range of trendy tops, crafted with intricate details. Create a chic statement look by teaming this lace number with skinny jeans and pumps.</em></p>
                </blockquote> -->
                <hr>
                <div class="social">
                  <!-- <h4>Show it to your friends</h4>
                  <p><a href="#" class="external facebook"><i class="fa fa-facebook"></i></a><a href="#" class="external gplus"><i class="fa fa-google-plus"></i></a><a href="#" class="external twitter"><i class="fa fa-twitter"></i></a><a href="#" class="email"><i class="fa fa-envelope"></i></a></p>
                </div> -->
              </div>
            </div>
          
          </div>
        </div>
      </div>
    </div>

    <!-- image zooming library -->
        <script src="https://unpkg.com/js-image-zoom@0.7.0/js-image-zoom.js" type="application/javascript"></script>

    <script>
      //image zoom
var options1 = {
    width: 400,
    zoomWidth: 500,
    offset: {vertical: 0, horizontal: 10},
};

// If the width and height of the image are not known or to adjust the image to the container of it
var options2 = {
    fillContainer: true,
    offset: {vertical: 10, horizontal: 10},
    "zoomPosition":"left"
};

new ImageZoom(document.getElementById("img-container"), options2);

</script>



    <script>
      function addToCart(productId,price) {
       fetch(`/product/addToCart?productId=${productId}&price=${price}`,{
        method: 'GET',
      }).then(data=> data.json())
      .then(data=>alert(data.message))
      }

      function addToWishlist(productId) {
       fetch(`/product/addToWishlist?productId=${productId}`,{
        method: 'GET',
      }).then(data=> {
        wishlistStatus()
        data.json()
      })
      .then(data=> wishlistStatus())
      }

      wishlistStatus()
      function wishlistStatus() {
        let productId = '<%=product._id%>'
       fetch(`/product/wishlistStatus?productId=${productId}`,{
        method: 'GET',
      }).then(data=> data.json())
      .then(data=> {
        if(data.status){
          let heartIcon= document.getElementById("heartIcon")
          heartIcon.classList.add('text-danger')
        }else{
          let heartIcon= document.getElementById("heartIcon")
          heartIcon.classList.remove('text-danger')
        }
      })
      }
    </script>
  </body>
</html>
